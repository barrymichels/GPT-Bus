extends layout

block content
  .container.mx-auto.px-4.py-8
    .max-w-4xl.mx-auto
      h1.text-3xl.font-bold.text-white.mb-8 Add Riders to #{trip.name}
      
      form(action=`/trip/${trip.id}/add-riders` method="POST")
        .bg-gray-900.rounded-lg.shadow-lg.overflow-hidden.mb-8
          table.min-w-full
            thead
              tr.bg-gray-800.text-gray-300.text-left
                th.py-3.px-4
                  label.inline-flex.items-center
                    input(type="checkbox" class="form-checkbox" onclick="toggleAll(this)")
                    span.ml-2 Select All
                th.py-3.px-4 Name
                th.py-3.px-4 Email
            tbody
              each rider in availableRiders
                tr.border-t.border-gray-800
                  td.py-3.px-4
                    input(
                      type="checkbox" 
                      name=`selected_riders[${rider.id}]`
                      value=rider.id
                      class="form-checkbox"
                    )
                  td.py-3.px-4.text-white= rider.name
                  td.py-3.px-4.text-white= rider.email
        
        .flex.justify-end.space-x-4
          a(href="/trips" class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors") Cancel
          button(type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors") Add Selected Riders

  script.
    function toggleAll(source) {
      const checkboxes = document.querySelectorAll('input[type="checkbox"][name^="selected_riders"]');
      checkboxes.forEach(checkbox => {
        checkbox.checked = source.checked;
      });
    }
